{"version":3,"sources":["webpack:///webpack/bootstrap 87f7f0b5687b73123049","webpack:///./public/extensions/mb-panel/index.js","webpack:///./public/extensions/mb-panel/mb-panel-extension.html","webpack:///./public/extensions/mb-panel/mb-panel.html","webpack:///./public/extensions/mb-panel/mb-panel.directive.js"],"names":["angular","module","directive","api","templateUrl","require","replace","link","scope","element","attrs","event","response","alreadyHasData","custom","update","belongsTo","key","listItem","value","data","create","enabled","permission","err","console","log","saveEdits","extensionData","find","$onRootScope"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;ACrCA;;AACA;;AAIA,wB;;;;;;ACNA;AACA;AACA,0EAAyE,oBAAoB;AAC7F,uB;;;;;;ACHA;AACA;AACA,0EAAyE,oBAAoB;AAC7F,uB;;;;;;;;;;ACHAA,SAAQC,MAAR,CAAe,aAAf,EAA8BC,SAA9B,CAAwC,SAAxC,UAAmDC,QAAQ;AACzDC,gBAAa,mBAAAC,CAAQ,CAAR,CAD4C;AAEzDC,YAAS,IAFgD;AAGzDC;AAAA,kCAAM,WAAOC,KAAP,EAAcC,OAAd,EAAuBC,KAAvB,EAAiC;AAAA;AAAA,uCAerC,WAAyBC,KAAzB,EAAgC;AAC9B,eAAI;AACF,iBAAIC,QAAJ;AACA,iBAAGC,cAAH,EAAmB;AACjBD,0BAAW,MAAMT,IAAIW,MAAJ,CAAWC,MAAX,CAAkB,EAACC,WAAW,UAAZ,EAAwBC,KAAKT,MAAMU,QAAN,CAAeD,GAA5C,EAAlB,EAAoE,EAACE,OAAOX,MAAMY,IAAd,EAApE,CAAjB;AACD,cAFD,MAEO;AACLR,0BAAW,MAAMT,IAAIW,MAAJ,CAAWO,MAAX,CAAkB,EAACL,WAAW,UAAZ,EAAwBC,KAAKT,MAAMU,QAAN,CAAeD,GAA5C,EAAiDE,OAAOX,MAAMY,IAA9D,EAAoEE,SAAS,IAA7E,EAAmFC,YAAY,aAA/F,EAAlB,CAAjB;AACAV,gCAAiB,IAAjB;AACD;AACDL,mBAAMY,IAAN,GAAaR,SAASO,KAAtB;AACD,YATD,CASE,OAAMK,GAAN,EAAW;AACXC,qBAAQC,GAAR,CAAY,8BAAZ,EAA4CF,GAA5C;AACD;AAEF,UA7BoC;;AAAA,yBAetBG,SAfsB;AAAA;AAAA;AAAA;;AAErCnB,aAAMY,IAAN,GAAa,EAAb;AACA,WAAIP,iBAAiB,KAArB;AACA,WAAI;AACF,aAAIe,gBAAgB,MAAMzB,IAAIW,MAAJ,CAAWe,IAAX,CAAgB,EAACb,WAAW,UAAZ,EAAwBC,KAAKT,MAAMU,QAAN,CAAeD,GAA5C,EAAhB,CAA1B;AACAW,yBAAgBA,cAAc,CAAd,CAAhB;AACA,aAAGA,aAAH,EAAkB;AAChBf,4BAAiB,IAAjB;AACAL,iBAAMY,IAAN,GAAaQ,cAAcT,KAA3B;AACD;AACF,QAPD,CAOE,OAAMK,GAAN,EAAW;AACXC,iBAAQC,GAAR,CAAY,KAAZ,EAAmBF,GAAnB;AACD;;AAkBDhB,aAAMsB,YAAN,CAAmB,aAAnB,EAAkCH,SAAlC;AACAnB,aAAMsB,YAAN,CAAmB,oBAAnB,EAAyCH,SAAzC;AAED,MAlCD;;AAAA;AAAA;AAAA;AAAA;AAHyD,EAAR,CAAnD,G","file":"extension.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 87f7f0b5687b73123049\n **/","// inject jade\nimport \"./mb-panel-extension.html\";\nimport \"./mb-panel.html\";\n// end inject jade\n\n// inject js\nimport \"./mb-panel.directive.js\";\n// end inject js\n\n// inject stylus\n// end inject stylus\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/extensions/mb-panel/index.js\n **/","var path = 'extensions/mb-panel/mb-panel-extension.html';\nvar html = \"<mb-panel></mb-panel>\\n\";\nwindow.angular.module('meanbaseApp').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/extensions/mb-panel/mb-panel-extension.html\n ** module id = 1\n ** module chunks = 0\n **/","var path = 'extensions/mb-panel/mb-panel.html';\nvar html = \"<div class=\\\"panel panel-default\\\">\\n\\t<div class=\\\"panel-heading\\\">\\n    <div mb-edit ng-model=\\\"data.headingText\\\" bind-options=\\\"editorSingleLine\\\" ng-change=\\\"autoSave()\\\"></div>\\n\\t</div>\\n\\t<div class=\\\"panel-body\\\">\\n\\t\\t<div mb-edit ng-model=\\\"data.bodyText\\\" bind-options=\\\"editorOptions\\\" ng-change=\\\"autoSave()\\\"></div>\\n\\t</div>\\n</div>\\n\";\nwindow.angular.module('meanbaseApp').run(['$templateCache', function(c) { c.put(path, html) }]);\nmodule.exports = path;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/extensions/mb-panel/mb-panel.html\n ** module id = 2\n ** module chunks = 0\n **/","angular.module('meanbaseApp').directive('mbPanel', api => ({\n  templateUrl: require('./mb-panel.html'),\n  replace: true,\n  link: async (scope, element, attrs) => {\n\n    scope.data = {}\n    let alreadyHasData = false\n    try {\n      let extensionData = await api.custom.find({belongsTo: 'mb-panel', key: scope.listItem.key})\n      extensionData = extensionData[0]\n      if(extensionData) {\n        alreadyHasData = true\n        scope.data = extensionData.value\n      }\n    } catch(err) {\n      console.log('err', err);\n    }\n\n    async function saveEdits(event) {\n      try {\n        let response\n        if(alreadyHasData) {\n          response = await api.custom.update({belongsTo: 'mb-panel', key: scope.listItem.key}, {value: scope.data})\n        } else {\n          response = await api.custom.create({belongsTo: 'mb-panel', key: scope.listItem.key, value: scope.data, enabled: true, permission: 'editContent'})\n          alreadyHasData = true\n        }\n        scope.data = response.value\n      } catch(err) {\n        console.log('Error saving extension data ', err);\n      }\n\n    }\n\n    scope.$onRootScope('cms.publish', saveEdits)\n    scope.$onRootScope('cms.publishChanges', saveEdits)\n\n  }\n}))\n\n\n\n/** WEBPACK FOOTER **\n ** ./public/extensions/mb-panel/mb-panel.directive.js\n **/"],"sourceRoot":""}